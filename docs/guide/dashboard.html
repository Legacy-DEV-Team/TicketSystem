<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Overview - Ticket System Documentation</title>
    <meta name="description" content="Dashboard configuration and usage for Ticket System">
    <link rel="stylesheet" href="../assets/styles.css">
    <link rel="icon" href="../public/icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="docs-layout">
                <!-- Sidebar -->
                <aside class="docs-sidebar">
                    <nav class="docs-nav-menu">
                        <div class="nav-section">
                            <h4>Getting Started</h4>
                            <ul>
                                <li><a href="getting-started.html" class="nav-item">Introduction</a></li>
                                <li><a href="installation.html" class="nav-item">Installation</a></li>
                                <li><a href="configuration.html" class="nav-item">Configuration</a></li>
                                <li><a href="first-setup.html" class="nav-item">First Setup</a></li>
                            </ul>
                        </div>
                        <div class="nav-section">
                            <h4>Bot Configuration</h4>
                            <ul>
                                <li><a href="bot-setup.html" class="nav-item">Discord Bot Setup</a></li>
                                <li><a href="permissions.html" class="nav-item">Permissions & Roles</a></li>
                                <li><a href="categories.html" class="nav-item">Ticket Categories</a></li>
                                <li><a href="auto-close.html" class="nav-item">Auto-Close System</a></li>
                            </ul>
                        </div>
                        <div class="nav-section">
                            <h4>Web Panel</h4>
                            <ul>
                                <li><a href="dashboard.html" class="nav-item active">Dashboard Overview</a></li>
                                <li><a href="user-management.html" class="nav-item">User Management</a></li>
                                <li><a href="analytics.html" class="nav-item">Analytics & Reports</a></li>
                                <li><a href="custom-domains.html" class="nav-item">Custom Domains</a></li>
                            </ul>
                        </div>
                    </nav>
                </aside>

                <!-- Content -->
                <div class="docs-content">
                    <article class="docs-article">
                        <header class="article-header">
                            <h1>Dashboard Overview</h1>
                            <p class="article-description">Complete guide to the Ticket System web dashboard and administration panel</p>
                        </header>

                        <section id="overview">
                            <h2>Dashboard Overview</h2>
                            <p>The Ticket System dashboard provides a web interface for managing your ticket system. This guide covers:</p>
                            <ul>
                                <li>Dashboard features and capabilities</li>
                                <li>System configuration management</li>
                                <li>User authentication and permissions</li>
                                <li>Administrative functions</li>
                            </ul>
                        </section>

                        <section id="features">
                            <h2>Dashboard Features</h2>
                            
                            <h3>1. System Configuration</h3>
                            <p>The dashboard allows administrators to configure system settings:</p>
                            <ul>
                                <li><strong>Guild Management</strong>: Configure settings for each Discord server</li>
                                <li><strong>Auto-Close Settings</strong>: Configure auto-close timers and behavior</li>
                                <li><strong>Category Management</strong>: Set up ticket categories and permissions</li>
                                <li><strong>User Management</strong>: Manage staff roles and permissions</li>
                            </ul>

                            <h3>2. Authentication System</h3>
                            <p>The dashboard uses Discord OAuth2 for authentication:</p>
                            <ul>
                                <li><strong>Discord Login</strong>: Users authenticate with their Discord account</li>
                                <li><strong>Role-Based Access</strong>: Access based on Discord roles</li>
                                <li><strong>Session Management</strong>: Secure session handling with JWT</li>
                                <li><strong>Permission Checks</strong>: Verify user permissions for actions</li>
                            </ul>

                            <h3>3. Administrative Functions</h3>
                            <p>Administrators can perform various management tasks:</p>
                            <ul>
                                <li><strong>System Configuration</strong>: Update global system settings</li>
                                <li><strong>Guild Settings</strong>: Configure per-server settings</li>
                                <li><strong>User Management</strong>: Manage staff access and permissions</li>
                                <li><strong>Monitoring</strong>: View system status and logs</li>
                            </ul>
                        </section>

                        <section id="architecture">
                            <h2>Dashboard Architecture</h2>
                            
                            <h3>1. Technology Stack</h3>
                            <div class="tech-stack">
                                <div class="tech-item">
                                    <h4>Frontend</h4>
                                    <ul>
                                        <li>Next.js 14 (App Router)</li>
                                        <li>React 18</li>
                                        <li>TypeScript</li>
                                        <li>Tailwind CSS</li>
                                    </ul>
                                </div>
                                <div class="tech-item">
                                    <h4>Backend</h4>
                                    <ul>
                                        <li>Next.js API Routes</li>
                                        <li>MongoDB with Mongoose</li>
                                        <li>JWT Authentication</li>
                                        <li>Discord OAuth2</li>
                                    </ul>
                                </div>
                                <div class="tech-item">
                                    <h4>Security</h4>
                                    <ul>
                                        <li>Argon2id Password Hashing</li>
                                        <li>AES-256-GCM Encryption</li>
                                        <li>EdDSA JWT Signing</li>
                                        <li>Role-Based Access Control</li>
                                    </ul>
                                </div>
                            </div>

                            <h3>2. Database Schema</h3>
                            <div class="code-block">
                                <pre><code>// System configuration schema
interface ISystemConfig {
  id: string;
  maintenanceMode: boolean;
  registrationEnabled: boolean;
  maxGuildsPerUser: number;
  defaultAutoCloseHours: number;
  defaultCooldownMinutes: number;
  transcriptRetentionDays: number;
  maxFileSize: number;
  allowedFileTypes: string[];
  rateLimitRequests: number;
  rateLimitWindow: number;
}</code></pre>
                            </div>

                            <h3>3. API Structure</h3>
                            <div class="code-block">
                                <pre><code>// API routes structure
/api/admin/
  /system-config/     # System configuration
  /guilds/           # Guild management
  /users/            # User management
  /tickets/          # Ticket management
  /analytics/        # Analytics and reports

/api/auth/
  /discord/          # Discord OAuth2
  /logout/           # Session logout
  /refresh/          # Token refresh

/api/webhooks/
  /discord/          # Discord webhook handling</code></pre>
                            </div>
                        </section>

                        <section id="authentication">
                            <h2>Authentication System</h2>
                            
                            <h3>1. Discord OAuth2 Flow</h3>
                            <p>The dashboard uses Discord OAuth2 for secure authentication:</p>
                            <ol>
                                <li>User clicks "Login with Discord"</li>
                                <li>Redirected to Discord authorization page</li>
                                <li>User authorizes the application</li>
                                <li>Discord redirects back with authorization code</li>
                                <li>Server exchanges code for access token</li>
                                <li>Server fetches user information from Discord</li>
                                <li>JWT token is created and sent to client</li>
                                <li>User is logged in and redirected to dashboard</li>
                            </ol>

                            <h3>2. JWT Token Structure</h3>
                            <div class="code-block">
                                <pre><code>// JWT payload structure
{
  userId: string;
  discordId: string;
  username: string;
  avatar: string;
  guilds: Array<{
    id: string;
    name: string;
    permissions: string[];
  }>;
  roles: string[];
  iat: number;  // Issued at
  exp: number;  // Expiration
}</code></pre>
                            </div>

                            <h3>3. Permission System</h3>
                            <p>Access control is based on Discord roles and permissions:</p>
                            <ul>
                                <li><strong>Administrator</strong>: Full access to all features</li>
                                <li><strong>Manage Server</strong>: Can configure guild settings</li>
                                <li><strong>Manage Channels</strong>: Can manage ticket categories</li>
                                <li><strong>View Channels</strong>: Can view tickets and reports</li>
                            </ul>
                        </section>

                        <section id="system-configuration">
                            <h2>System Configuration</h2>
                            
                            <h3>1. Global Settings</h3>
                            <div class="setup-form">
                                <h4>System Configuration</h4>
                                <ul>
                                    <li><strong>Maintenance Mode</strong>: Enable/disable system maintenance</li>
                                    <li><strong>Registration Enabled</strong>: Allow new user registrations</li>
                                    <li><strong>Max Guilds Per User</strong>: Limit guilds per user account</li>
                                    <li><strong>Default Auto-Close Hours</strong>: Default auto-close timer</li>
                                    <li><strong>Default Cooldown Minutes</strong>: Default cooldown between tickets</li>
                                    <li><strong>Transcript Retention Days</strong>: How long to keep transcripts</li>
                                </ul>
                            </div>

                            <h3>2. Security Settings</h3>
                            <div class="setup-form">
                                <h4>Security Configuration</h4>
                                <ul>
                                    <li><strong>Max File Size</strong>: Maximum file upload size</li>
                                    <li><strong>Allowed File Types</strong>: Permitted file extensions</li>
                                    <li><strong>Rate Limit Requests</strong>: API rate limiting</li>
                                    <li><strong>Rate Limit Window</strong>: Rate limit time window</li>
                                    <li><strong>Session Timeout</strong>: JWT token expiration time</li>
                                </ul>
                            </div>

                            <h3>3. API Configuration</h3>
                            <div class="code-block">
                                <pre><code>// System config API endpoints
GET  /api/admin/system-config     # Get current configuration
POST /api/admin/system-config     # Update configuration
GET  /api/admin/system-config/validate  # Validate configuration

// Example configuration update
{
  "maintenanceMode": false,
  "registrationEnabled": true,
  "maxGuildsPerUser": 5,
  "defaultAutoCloseHours": 72,
  "defaultCooldownMinutes": 60,
  "transcriptRetentionDays": 30,
  "maxFileSize": 10485760,  // 10MB
  "allowedFileTypes": [".png", ".jpg", ".pdf"],
  "rateLimitRequests": 100,
  "rateLimitWindow": 900  // 15 minutes
}</code></pre>
                            </div>
                        </section>

                        <section id="guild-management">
                            <h2>Guild Management</h2>
                            
                            <h3>1. Guild Configuration</h3>
                            <p>Each Discord server (guild) has its own configuration:</p>
                            <ul>
                                <li><strong>Auto-Close Settings</strong>: Per-guild auto-close configuration</li>
                                <li><strong>Cooldown Settings</strong>: Ticket creation cooldown</li>
                                <li><strong>Category Management</strong>: Ticket categories and permissions</li>
                                <li><strong>User Management</strong>: Staff roles and blocked users</li>
                                <li><strong>Logging</strong>: Log channels and transcript storage</li>
                            </ul>

                            <h3>2. Guild Settings Schema</h3>
                            <div class="code-block">
                                <pre><code>interface IGuild {
  guildId: string;
  name: string;
  icon?: string;
  ownerId: string;
  memberCount: number;
  autoCloseEnabled: boolean;
  autoCloseHours: number;
  cooldownEnabled: boolean;
  cooldownMinutes: number;
  devModeEnabled: boolean;
  devModeRoles: string[];
  logChannelId?: string;
  transcriptChannelId?: string;
  blockedUsers: string[];
  maxActiveTickets: number;
  activeTickets: number;
  totalTickets: number;
  categories: ITicketCategory[];
  subscription: {
    tier: 'free' | 'pro' | 'enterprise';
    expiresAt?: Date;
    features: string[];
  };
}</code></pre>
                            </div>

                            <h3>3. Guild API Endpoints</h3>
                            <div class="code-block">
                                <pre><code>// Guild management API
GET    /api/admin/guilds              # List user's guilds
GET    /api/admin/guilds/:guildId     # Get guild configuration
PUT    /api/admin/guilds/:guildId     # Update guild configuration
DELETE /api/admin/guilds/:guildId     # Remove guild

// Guild statistics
GET    /api/admin/guilds/:guildId/stats     # Get guild statistics
GET    /api/admin/guilds/:guildId/tickets   # Get guild tickets
GET    /api/admin/guilds/:guildId/logs      # Get guild logs</code></pre>
                            </div>
                        </section>

                        <section id="user-management">
                            <h2>User Management</h2>
                            
                            <h3>1. User Roles and Permissions</h3>
                            <p>The dashboard supports role-based access control:</p>
                            <ul>
                                <li><strong>Administrator</strong>: Full system access</li>
                                <li><strong>Guild Manager</strong>: Can manage specific guilds</li>
                                <li><strong>Support Staff</strong>: Can view and manage tickets</li>
                                <li><strong>Viewer</strong>: Read-only access to reports</li>
                            </ul>

                            <h3>2. User Session Management</h3>
                            <div class="code-block">
                                <pre><code>// User session management
interface IUser {
  id: string;
  discordId: string;
  username: string;
  avatar?: string;
  email?: string;
  guilds: Array<{
    id: string;
    name: string;
    permissions: string[];
  }>;
  roles: string[];
  lastLogin: Date;
  createdAt: Date;
  updatedAt: Date;
}</code></pre>
                            </div>

                            <h3>3. Authentication Flow</h3>
                            <div class="code-block">
                                <pre><code>// Authentication flow
1. User clicks "Login with Discord"
2. Redirect to Discord OAuth2
3. User authorizes application
4. Discord redirects with code
5. Server exchanges code for token
6. Server fetches user info
7. Create/update user in database
8. Generate JWT token
9. Set cookie and redirect to dashboard</code></pre>
                            </div>
                        </section>

                        <section id="security">
                            <h2>Security Features</h2>
                            
                            <h3>1. Data Encryption</h3>
                            <ul>
                                <li><strong>Password Hashing</strong>: Argon2id with configurable parameters</li>
                                <li><strong>Token Encryption</strong>: AES-256-GCM for sensitive data</li>
                                <li><strong>JWT Signing</strong>: EdDSA (Ed25519) for authentication</li>
                                <li><strong>Session Security</strong>: Secure HTTP-only cookies</li>
                            </ul>

                            <h3>2. Access Control</h3>
                            <ul>
                                <li><strong>Role-Based Access</strong>: Permissions based on Discord roles</li>
                                <li><strong>Guild-Specific Access</strong>: Users can only access their guilds</li>
                                <li><strong>API Rate Limiting</strong>: Prevent abuse and DDoS attacks</li>
                                <li><strong>Input Validation</strong>: Sanitize all user inputs</li>
                            </ul>

                            <h3>3. Audit Logging</h3>
                            <ul>
                                <li><strong>Authentication Logs</strong>: Track login attempts and sessions</li>
                                <li><strong>Configuration Changes</strong>: Log all system changes</li>
                                <li><strong>API Access Logs</strong>: Monitor API usage and errors</li>
                                <li><strong>Security Events</strong>: Track suspicious activities</li>
                            </ul>
                        </section>

                        <section id="troubleshooting">
                            <h2>Troubleshooting</h2>
                            
                            <h3>Common Issues</h3>
                            <div class="troubleshooting-grid">
                                <div class="issue-card">
                                    <h4>Login Issues</h4>
                                    <ul>
                                        <li>Check Discord OAuth2 configuration</li>
                                        <li>Verify redirect URI settings</li>
                                        <li>Check client ID and secret</li>
                                        <li>Review Discord application settings</li>
                                    </ul>
                                </div>
                                
                                <div class="issue-card">
                                    <h4>Permission Errors</h4>
                                    <ul>
                                        <li>Check user's Discord roles</li>
                                        <li>Verify guild permissions</li>
                                        <li>Check JWT token validity</li>
                                        <li>Review role-based access rules</li>
                                    </ul>
                                </div>
                                
                                <div class="issue-card">
                                    <h4>Configuration Issues</h4>
                                    <ul>
                                        <li>Check system configuration</li>
                                        <li>Verify guild settings</li>
                                        <li>Review database connection</li>
                                        <li>Check API endpoint responses</li>
                                    </ul>
                                </div>
                                
                                <div class="issue-card">
                                    <h4>Session Problems</h4>
                                    <ul>
                                        <li>Check JWT token expiration</li>
                                        <li>Verify cookie settings</li>
                                        <li>Check browser security settings</li>
                                        <li>Review session management</li>
                                    </ul>
                                </div>
                            </div>

                            <h3>Debug Information</h3>
                            <div class="code-block">
                                <pre><code>// Check user session
GET /api/auth/me

// Check guild access
GET /api/admin/guilds

// Check system status
GET /api/admin/system-config

// Check authentication status
GET /api/auth/status</code></pre>
                            </div>
                        </section>

                        <section id="next-steps">
                            <h2>Next Steps</h2>
                            <p>After setting up the dashboard:</p>
                            <ol>
                                <li><strong><a href="user-management.html">Configure Users</a></strong> - Set up staff access and permissions</li>
                                <li><strong><a href="categories.html">Set Up Categories</a></strong> - Configure ticket categories</li>
                                <li><strong><a href="auto-close.html">Configure Auto-Close</a></strong> - Set up automatic ticket management</li>
                                <li><strong><a href="analytics.html">Set Up Analytics</a></strong> - Configure reporting and monitoring</li>
                            </ol>
                        </section>
                    </article>

                    <!-- Table of Contents -->
                    <aside class="table-of-contents">
                        <h4>On this page</h4>
                        <!-- Auto-generated by JavaScript -->
                    </aside>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- JavaScript -->
    <script src="../assets/script.js"></script>
</body>
</html> 